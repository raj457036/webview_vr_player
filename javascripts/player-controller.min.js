function getUrlParameter(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),t=n.exec(location.search);return null===t?null:decodeURIComponent(t[1].replace(/\+/g," "))}function processParams(){const e=getUrlParameter("video"),n=getUrlParameter("VRBtn"),t=getUrlParameter("autoPlay"),a=getUrlParameter("loop");if(window.mediaController=new MediaController("video_player_id"),null!==e&&(playlist.streams[0]=e,init(!0),"false"!==t?mediaController.play():mediaController.pause(),"true"===a&&(mediaController.video.loop=!0),"false"===n)){var s=document.getElementsByTagName("head").item(0),i=document.createElement("style");i.type="text/css",i.appendChild(document.createTextNode(".a-enter-vr-button {display: none;}")),s.appendChild(i)}}const MediaEvent={ABORTED:1,CAN_PLAY:2,CAN_PLAY_THROUGH:3,DURATION_CHANGE:4,ENDED:5,ERROR:6,LOADED_DATA:7,LOADED_META_DATA:8,LOAD_START:9,PAUSE:10,PLAY:11,PLAYING:12,PROGRESS:13,RATE_CHANGE:14,SEEKED:15,SEEKING:16,STALLED:17,SUSPEND:18,TIME_UPDATE:19,VOLUME_CHANGE:20,WAITING:21,EXTERNAL:22};Object.freeze(MediaEvent);class MediaMessage{constructor(e,n,t){this.readyState=e,this.eventType=n,this.message=t}getMessage(){const e={readyState:this.readyState,event:this.eventType,message:this.message};return JSON.stringify(e)}}class MediaMessageChannel{constructor(e){this.controller=e}subscribe(e,n=this){const t=this.controller.video;e==MediaEvent.ABORTED&&(t.onabort=function(){n.sendMessage(MediaEvent.ABORTED)}),e==MediaEvent.CAN_PLAY&&(t.oncanplay=function(){n.sendMessage(MediaEvent.CAN_PLAY)}),e==MediaEvent.CAN_PLAY_THROUGH&&(t.oncanplaythrough=function(){n.sendMessage(MediaEvent.CAN_PLAY_THROUGH)}),e==MediaEvent.DURATION_CHANGE&&(t.ondurationchange=function(){n.sendMessage(MediaEvent.DURATION_CHANGE)}),e==MediaEvent.ENDED&&(t.onended=function(){n.sendMessage(MediaEvent.ENDED)}),e==MediaEvent.ERROR&&(t.onerror=function(){n.sendMessage(MediaEvent.ERROR)}),e==MediaEvent.LOADED_DATA&&(t.onloadeddata=function(){n.sendMessage(MediaEvent.LOADED_DATA)}),e==MediaEvent.LOADED_META_DATA&&(t.onloadedmetadata=function(){n.sendMessage(MediaEvent.LOADED_META_DATA)}),e==MediaEvent.LOAD_START&&(t.onloadstart=function(){n.sendMessage(MediaEvent.LOAD_START)}),e==MediaEvent.PAUSE&&(t.onpause=function(){n.sendMessage(MediaEvent.PAUSE)}),e==MediaEvent.PLAY&&(t.onplay=function(){n.sendMessage(MediaEvent.PLAY)}),e==MediaEvent.PLAYING&&(t.onplaying=function(){n.sendMessage(MediaEvent.PLAYING)}),e==MediaEvent.PROGRESS&&(t.onprogress=function(){n.sendMessage(MediaEvent.PROGRESS)}),e==MediaEvent.RATE_CHANGE&&(t.onratechange=function(){n.sendMessage(MediaEvent.RATE_CHANGE)}),e==MediaEvent.SEEKED&&(t.onseeked=function(){n.sendMessage(MediaEvent.SEEKED)}),e==MediaEvent.SEEKING&&(t.onseeking=function(){n.sendMessage(MediaEvent.SEEKING)}),e==MediaEvent.STALLED&&(t.onstalled=function(){n.sendMessage(MediaEvent.STALLED)}),e==MediaEvent.SUSPEND&&(t.onsuspend=function(){n.sendMessage(MediaEvent.SUSPEND)}),e==MediaEvent.TIME_UPDATE&&(t.ontimeupdate=function(){n.sendMessage(MediaEvent.TIME_UPDATE)}),e==MediaEvent.VOLUME_CHANGE&&(t.onvolumechange=function(){n.sendMessage(MediaEvent.VOLUME_CHANGE)}),e==MediaEvent.WAITING&&(t.onwaiting=function(){n.sendMessage(MediaEvent.WAITING)})}unsubscribe(e){const n=this.controller.video;e==MediaEvent.ABORTED&&(n.onabort=null),e==MediaEvent.CAN_PLAY&&(n.oncanplay=null),e==MediaEvent.CAN_PLAY_THROUGH&&(n.oncanplaythrough=null),e==MediaEvent.DURATION_CHANGE&&(n.ondurationchange=null),e==MediaEvent.ENDED&&(n.onended=null),e==MediaEvent.ERROR&&(n.onerror=null),e==MediaEvent.LOADED_DATA&&(n.onloadeddata=null),e==MediaEvent.LOADED_META_DATA&&(n.onloadedmetadata=null),e==MediaEvent.LOAD_START&&(n.onloadstart=null),e==MediaEvent.PAUSE&&(n.onpause=null),e==MediaEvent.PLAY&&(n.onplay=null),e==MediaEvent.PLAYING&&(n.onplaying=null),e==MediaEvent.PROGRESS&&(n.onprogress=null),e==MediaEvent.RATE_CHANGE&&(n.onratechange=null),e==MediaEvent.SEEKED&&(n.onseeked=null),e==MediaEvent.SEEKING&&(n.onseeking=null),e==MediaEvent.STALLED&&(n.onstalled=null),e==MediaEvent.SUSPEND&&(n.onsuspend=null),e==MediaEvent.TIME_UPDATE&&(n.ontimeupdate=null),e==MediaEvent.VOLUME_CHANGE&&(n.onvolumechange=null),e==MediaEvent.WAITING&&(n.onwaiting=null)}sendMessage(e,n=""){const t=new MediaMessage(this.controller.video.readyState,e,n);try{return this._postMessage(t.getMessage()),!0}catch(e){console.error("postMessage is not defined. try : MediaMessageChannel.postMessage = someMethod")}return!1}_postMessage(e){MediaMessageChannel.postMessage(e)}}class MediaController{constructor(e){this.video=document.getElementById(e),this.channel=new MediaMessageChannel(this)}play(){return this.video.play(),""}seek(e){return this.currentTime(this.currentTime()+e),""}currentTime(e){return e<this.duration&&e>0?(this.video.currentTime=e,""):this.video.currentTime}play(){return this.video.play(),""}pause(){return this.video.pause(),""}playbackRate(e){return e<5&&e>-1?(this.video.playbackRate=e,""):this.video.playbackRate}forceReplay(){return this.pause(),this.currentTime(0),init(!0),""}load(e,n=!1){return this.pause(),this.currentTime(0),playlist.streams[0]=e,init(!0),n?this.play():this.pause(),""}enterVRMode(){const e=$("a-scene")[0];return e.enterVR(),""}exitVRMode(){const e=$("a-scene")[0];return e.exitVR(),""}subscribeToAllEvents(){const e=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21];for(var n of e)this.channel.subscribe(n);return""}unSubscribeFromAllEvents(){const e=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21];for(var n of e)this.channel.unsubscribe(n);return""}subscribe(...e){for(var n of e)this.channel.subscribe(n);return""}unsubscribe(...e){for(var n of e)this.channel.unsubscribe(n);return""}get state(){return this.video.readyState}get paused(){return this.video.paused}get duration(){return this.video.duration}get volume(){return 100*this.video.volume}get isMuted(){return this.video.muted}}document.addEventListener("DOMContentLoaded",processParams);
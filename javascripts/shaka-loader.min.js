function init(e){(playlist.streams.length>0||!0===e)&&(-1!=playlist.streams[0].indexOf("m3u8")?(console.log("hls"),hlsLoad()):(console.log("dash"),initApp()))}function initApp(){if(shaka.polyfill.installAll(),shaka.Player.isBrowserSupported()){var e=initPlayer();window.player=e,doPlay(e,pushNext())}else console.error("Browser not supported!")}function initPlayer(){var e=document.getElementById("video_player_id"),t=new shaka.Player(e);return t.addEventListener("error",onErrorEvent),e.addEventListener("ended",function(){t.unload(),doPlay(t,pushNext())}),t}function doPlay(e,t){e.load(t.manifest).then(function(){console.log("hello")}).catch(onError)}function pushNext(){return playlist.pos++,playlist.pos>playlist.streams.length-1&&(playlist.pos=0),{manifest:playlist.streams[playlist.pos],title:playlist.titles[playlist.pos]}}function onErrorEvent(e){onError(e.detail)}function onError(e){console.error("Error code",e.code,"object",e)}function hlsLoad(e){if(Hls.isSupported()){var t=document.getElementById("video_player_id"),l=new Hls;l.loadSource(playlist.streams[0]),l.attachMedia(t),l.on(Hls.Events.MANIFEST_PARSED,function(){MediaController.mediaReady=!0})}else initApp()}var playlist={streams:[],titles:[],pos:-1};